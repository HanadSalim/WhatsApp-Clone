{"version":3,"sources":["firebase.js","context/userContext.js","Components/SignIn.js","context/roomContext.js","Components/SidebarChat.js","Components/Sidebar.js","Components/Message.js","Components/Chat.js","Components/Welcome.js","Components/WhatsApp.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","getAuth","db","getFirestore","provider","GoogleAuthProvider","logInWithEmailAndPassword","email","password","a","signInWithEmailAndPassword","console","error","alert","message","signInWithgoogle","signInWithPopup","then","result","log","catch","registerWithEmailAndPassword","name","createUserWithEmailAndPassword","res","user","url","AvatarGenerator","generateRandomAvatar","addDoc","collection","uid","authProvider","photoUrl","UserContext","createContext","Provider","UserProvider","children","useState","uId","uProfile","uDisplayName","state","setState","value","context","SignIn","useContext","setContext","navigate","useNavigate","q","query","where","getDocs","forEach","doc","updateProfile","displayName","data","photoURL","e","preventDefault","cName","document","getElementById","cEmail","cPass","onAuthStateChanged","reload","update","className","id","type","placeholder","onClick","action","href","sEmail","sPass","classList","remove","add","RoomContext","RoomProvider","roomName","profile","roomId","history","selected","SidebarChat","fetchData","docRef","getDoc","response","exists","messages","Avatar","src","Sidebar","room","setroom","chat","setchat","useEffect","onSnapshot","snapshot","docs","map","IconButton","DonutLargeOutlined","Chat","MoreVertOutlined","SearchOutlined","onSubmit","event","generator","onChange","target","signOut","Message","currentUser","time","input","setInput","con","isMounted","sendMessage","today","Date","getHours","getMinutes","updateDoc","arrayUnion","MoreVert","element","InsertEmoticon","AttachFile","Mic","Welcome","rel","WhatsApp","App","path","ReactDOM","render"],"mappings":"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","file":"static/js/main.a3eabdf6.chunk.js","sourcesContent":["import {initializeApp} from \"firebase/app\";\r\nimport {  \r\n  getFirestore,\r\n   collection, \r\n   addDoc, } from \"@firebase/firestore\";\r\nimport {\r\n  GoogleAuthProvider,\r\n  getAuth,\r\n  signInWithPopup,\r\n  signInWithEmailAndPassword,\r\n  createUserWithEmailAndPassword,\r\n  /*\r\n    PATTERN THIS ASAP\r\n    \r\n  */\r\n  sendPasswordResetEmail,\r\n  signOut,\r\n} from \"firebase/auth\";\r\nimport { AvatarGenerator } from \"random-avatar-generator\";\r\n\r\n\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyC3vIsTEXFPdPHpaq902SegISlVfm4NB2Q\",\r\n    authDomain: \"whatsapp-clone-51311.firebaseapp.com\",\r\n    projectId: \"whatsapp-clone-51311\",\r\n    storageBucket: \"whatsapp-clone-51311.appspot.com\",\r\n    messagingSenderId: \"474220246334\",\r\n    appId: \"1:474220246334:web:9ce05cb0fcf73a7057e86f\"\r\n  }\r\n\r\n//  initialise firebase\r\nconst app = initializeApp(firebaseConfig)\r\nconst auth = getAuth(app)\r\nconst db = getFirestore(app)\r\nconst provider = new GoogleAuthProvider()\r\n\r\nconst logInWithEmailAndPassword = async (email, password) => {\r\n  try {\r\n    await signInWithEmailAndPassword(auth, email, password);\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n}\r\n\r\nconst signInWithgoogle = () => {\r\n  signInWithPopup(auth,provider).then((result)=>{\r\n      console.log(result)\r\n  }).catch((error)=>console.log(error))\r\n}\r\n\r\nconst registerWithEmailAndPassword = async (name, email, password) => {\r\n  try {\r\n    const res = await createUserWithEmailAndPassword(auth, email, password);\r\n    const user = res.user;\r\n    const url = new AvatarGenerator().generateRandomAvatar()\r\n    await addDoc(collection(db, \"users\"), {\r\n      uid: user.uid,\r\n      name,\r\n      authProvider: \"local\",\r\n      email,\r\n      photoUrl:url\r\n    })\r\n    alert(\"Account successfully created\")\r\n  } catch (err) {\r\n    console.error(err);\r\n    alert(err.message);\r\n  }\r\n}\r\n\r\n// const sendPasswordReset = async (email) => {\r\n//   try {\r\n//     await sendPasswordResetEmail(auth, email);\r\n//     alert(\"Password reset link sent!\");\r\n//   } catch (err) {\r\n//     console.error(err);\r\n//     alert(err.message);\r\n//   }\r\n// }\r\n\r\nconst logout = () => {\r\n  signOut(auth);\r\n}\r\n\r\nexport {\r\n  auth,\r\n  db,\r\n  provider,\r\n  logInWithEmailAndPassword,\r\n  registerWithEmailAndPassword,\r\n  signInWithgoogle,\r\n  // sendPasswordReset,\r\n  logout\r\n}\r\n\r\nexport default db\r\n\r\n","import React, {createContext, useState } from \"react\";\r\n\r\nexport const  UserContext = createContext(null)\r\n\r\nconst {Provider} = UserContext\r\n\r\nconst UserProvider = ({ children }) => {\r\n  const [state, setState] = useState({\r\n    uId:\"\",\r\n    uProfile:\"\",\r\n    uDisplayName:\"\",\r\n    \r\n  })\r\n \r\n    return <Provider value={[state, setState]}>{children}</Provider>\r\n    };\r\n\r\n    UserProvider.context = UserContext\r\n    export default UserProvider\r\n\r\n    ","import React, { useContext } from 'react'\r\nimport {onAuthStateChanged, updateProfile} from \"firebase/auth\"\r\nimport { collection, getDocs, query, where } from \"firebase/firestore\";\r\nimport { useNavigate } from 'react-router'\r\nimport '../CSS/SignIn.css'\r\nimport { db,auth, registerWithEmailAndPassword, logInWithEmailAndPassword, signInWithgoogle } from '../firebase'\r\nimport { UserContext } from '../context/userContext'\r\n\r\nconst SignIn = () =>{\r\n    const [context, setContext] = useContext(UserContext)\r\n    const navigate = useNavigate()\r\n     onAuthStateChanged(auth, (user) => {\r\n        if (user) {\r\n            user.reload()\r\n            if(user.displayName===null){\r\n                update(user)\r\n            }else{\r\n                setContext({\r\n                    uId:user.uid,\r\n                    uProfile:user.photoURL,\r\n                    uDisplayName:user.displayName\r\n                })\r\n                navigate('/app')\r\n            }  \r\n        } \r\n    });\r\n\r\n    async function update(user){\r\n        const q = query(collection(db,'users'), where(\"uid\",\"==\",user.uid))\r\n        const docs = await getDocs(q)\r\n        docs.forEach((doc)=>{\r\n            updateProfile(user,{\r\n            displayName:doc.data().name, photoURL:doc.data().photoUrl\r\n            }).then(()=>{\r\n                    console.log('updated successfully')\r\n                    setContext({\r\n                        uId:user.uid,\r\n                        uProfile:user.photoURL,\r\n                        uDisplayName:user.displayName\r\n                    })\r\n                    navigate('/app')\r\n                }).catch((error)=>{console.log(error)})\r\n        })\r\n    }\r\n\r\n    async function registerUser(e){\r\n        e.preventDefault();\r\n        let cName = document.getElementById(\"cn\").value;\r\n        let cEmail = document.getElementById(\"ce\").value;\r\n        let cPass = document.getElementById(\"cp\").value;\r\n        registerWithEmailAndPassword(cName,cEmail,cPass)\r\n    }\r\n    function logIn(e){\r\n        e.preventDefault()\r\n        let sEmail = document.getElementById(\"se\").value;\r\n        let sPass = document.getElementById(\"sp\").value;\r\n        logInWithEmailAndPassword(sEmail,sPass)\r\n    }\r\n    function signUp(){\r\n        document.getElementById('container').classList.add(\"right-panel-active\");\r\n    }\r\n    function signIn(){\r\n        document.getElementById('container').classList.remove(\"right-panel-active\");\r\n    }\r\n\r\n    return(\r\n    <div className='body'>\r\n        <div className=\"container\" id=\"container\">\r\n        <div className=\"form-container sign-up-container\">\r\n            <form >\r\n                <h1>Create Account</h1>\r\n                <input id=\"cn\" type=\"text\" placeholder=\"Name\" />\r\n                <input id=\"ce\" type=\"email\" placeholder=\"Email\" />\r\n                <input id=\"cp\" type=\"password\" placeholder=\"Password\" />\r\n                <button onClick={registerUser}>Sign Up</button>\r\n            </form>\r\n        </div>\r\n        <div className=\"form-container sign-in-container\">\r\n            <form action=\"\">\r\n                <h1>Sign in</h1>\r\n                <div className=\"social-container\">\r\n                    <a><i className=\"fab fa-google-plus-g\" onClick={signInWithgoogle}></i></a>\r\n                </div>\r\n                <span>or use your account</span>\r\n                <input type=\"email\" placeholder=\"Email\" id='se' />\r\n                <input type=\"password\" placeholder=\"Password\" id='sp' />\r\n                <a href=\"\">Forgot your password?</a>\r\n                <button onClick={logIn}>Sign In</button>\r\n            </form>\r\n        </div>\r\n        <div className=\"overlay-container\">\r\n            <div className=\"overlay\">\r\n                <div className=\"overlay-panel overlay-left\">\r\n                    <h1>Welcome Back!</h1>\r\n                    <p>To keep connected with us please login with your personal info</p>\r\n                    <button className=\"ghost\" onClick={signIn}>Sign In</button>\r\n                </div>\r\n                <div className=\"overlay-panel overlay-right\">\r\n                    <h1>Hello, Friend!</h1>\r\n                    <p>Enter your details and start journey with us</p>\r\n                    <button className=\"ghost\" onClick={signUp}>Sign Up</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    </div>)\r\n}\r\n\r\nexport default SignIn","import React, {createContext, useState } from \"react\";\r\n\r\nexport const  RoomContext = createContext(null)\r\n\r\nconst {Provider} = RoomContext\r\n\r\nconst RoomProvider = ({ children }) => {\r\n  const [state, setState] = useState({\r\n    roomName: \"Click a chat\",\r\n    profile:\"\",\r\n    roomId:\"\",\r\n    history:[],\r\n    selected:false\r\n  })\r\n \r\n    return <Provider value={[state, setState]}>{children}</Provider>\r\n    };\r\n\r\n    RoomProvider.context = RoomContext\r\n    export default RoomProvider\r\n\r\n    ","import { Avatar } from '@mui/material'\r\nimport React, { useContext } from 'react'\r\nimport '../CSS/SidebarChat.css'\r\nimport { RoomContext } from '../context/roomContext'\r\nimport { doc,getDoc} from \"firebase/firestore\";\r\nimport db from \"../firebase\";\r\n \r\nfunction SidebarChat({id,name,profile}) {\r\n    // eslint-disable-next-line\r\n    const [context, setContext] = useContext(RoomContext)\r\n    function logIt(){\r\n        const fetchData = async() => {\r\n            try {\r\n                const docRef = doc(db, \"rooms\", id);\r\n                const response = await getDoc(docRef)\r\n                if (response.exists) {\r\n                    setContext({roomName:name,profile:profile,roomId:id,history:response.data().messages,selected:true}) \r\n                }\r\n            } catch(err) {\r\n                console.error(err);\r\n            }\r\n\r\n        }\r\n        fetchData();\r\n\r\n    }\r\n\r\n    \r\n    return (\r\n \r\n        <div className=\"sidebarChat \"onClick={logIt} >\r\n            <div className=\"sidebarChat__avatar\">\r\n                <Avatar src={profile} />\r\n            </div>\r\n            <div className=\"sidebarChat__info\">\r\n            <span>{name}</span>\r\n            <p>Last message sent will go here...</p> \r\n             <div className='border'></div></div>\r\n           \r\n            \r\n        </div>\r\n       \r\n    )\r\n}\r\n\r\nexport default SidebarChat\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport {Avatar, IconButton } from '@mui/material';\r\nimport SidebarChat from '../Components/SidebarChat';\r\nimport { AvatarGenerator } from 'random-avatar-generator';\r\nimport '../CSS/Sidebar.css';\r\nimport db, { auth, logout } from \"../firebase\";\r\nimport {onSnapshot, collection, addDoc} from \"firebase/firestore\";\r\nimport { DonutLargeOutlined, MoreVertOutlined, SearchOutlined, Chat } from '@mui/icons-material';\r\nimport { UserContext } from '../context/userContext';\r\nimport { useNavigate } from 'react-router';\r\nimport { onAuthStateChanged } from 'firebase/auth';\r\n\r\nfunction Sidebar() {\r\n    const [room, setroom] = useState([])\r\n    const [chat, setchat] = useState(\"\")\r\n    const navigate = useNavigate()\r\n    const [context, setContext] = useContext(UserContext)\r\n    const {uId,uProfile,uDisplayName} = context\r\n    const createChat = (event) => {\r\n        if(chat!==\"\"){\r\n            event.preventDefault()\r\n            const generator = new AvatarGenerator();\r\n            addDoc(collection(db, \"rooms\"), {\r\n                name: chat,\r\n                messages: [],\r\n                profile:generator.generateRandomAvatar()\r\n            })\r\n            setchat(\"\")\r\n        }\r\n        }\r\n\r\n    useEffect(\r\n        () => \r\n            onSnapshot(collection(db, \"rooms\"),(snapshot)=>\r\n            setroom(snapshot.docs.map((doc)=>({id: doc.id, ...doc.data()})))\r\n        )\r\n        , []);\r\n\r\n    function getInputValue(event){\r\n        setchat(event.target.value)\r\n    }\r\n\r\n    function signOut(){\r\n        logout()\r\n        onAuthStateChanged(auth, (user) => {\r\n            if (!user) {\r\n                setContext({uId:\"\",uProfile:\"\",uDisplayName:\"\"})\r\n                navigate('/')\r\n            } \r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"sidebar\">\r\n            <div className=\"sidebar__header\"> \r\n                <Avatar src={uProfile} />\r\n                <div className=\"sidebar__headerRight\" >\r\n                <IconButton>\r\n                        <DonutLargeOutlined />\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <Chat />\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <MoreVertOutlined />\r\n                    </IconButton>\r\n                </div>\r\n            </div> \r\n            <div className=\"search__container\">\r\n\r\n          <div className=\"sidebar__search\">\r\n              <div className=\"sidebar__searchContainer\">\r\n                <SearchOutlined />\r\n                <form onSubmit={createChat}>\r\n                <input placeholder=\"Search or start new chat\" onChange={getInputValue} value={chat}/>\r\n                </form>\r\n              </div>\r\n          </div>\r\n            </div>\r\n            <div className=\"sidebar__chats__wrap\">\r\n                \r\n          <div className=\"sidebar__chats\">\r\n              {room.map(room=> (\r\n                  <SidebarChat key={room.id} id={room.id} name={room.name} profile={room.profile} messages={room.messages}/>\r\n                  ))}\r\n          </div>\r\n            </div>\r\n            <button className='logout-button' onClick={signOut}>logout</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","import React, { useContext } from 'react';\r\nimport {UserContext} from '../context/userContext';\r\nfunction Message({currentUser,user,message,time}){\r\n\r\n    return(currentUser==user.id?\r\n   \r\n    <div className=\"chat__message chat__sender right\">\r\n        <p className='chat__text'>{message}</p>\r\n        <p className=\"chat__time\">{time}</p>\r\n    </div> :<div className=\"chat__message left\">\r\n        <p className=\"chat__name\">{user.name}</p>\r\n        <p className='chat__text'>{message}</p>\r\n        <p className=\"chat__time\">{time}</p></div>\r\n)\r\n}\r\n\r\nexport default Message","import {AttachFile, MoreVert, InsertEmoticon, Mic, SearchOutlined} from '@mui/icons-material'\r\nimport {Avatar, IconButton } from '@mui/material'\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { RoomContext } from '../context/roomContext'\r\nimport { UserContext } from '../context/userContext'\r\nimport Message from '../Components/Message'\r\nimport db from \"../firebase\";\r\nimport { doc, updateDoc, arrayUnion, onSnapshot } from \"firebase/firestore\";\r\nimport \"../CSS/Chat.css\"\r\n\r\nfunction Chat() {\r\n    // when you type in the input Field store in state\r\n    const [input,setInput]=useState('')\r\n    // ContextApi\r\n    const [context, setContext] = useContext(RoomContext)\r\n    const {roomName,profile,roomId,history} = context \r\n    const [con, setCon] = useContext(UserContext)\r\n    const {uId,uDisplayName} = con\r\n    //Once loaded and on change do the following\r\n    useEffect(() => {\r\n        let isMounted = true  \r\n        if (isMounted) onSnapshot(doc(db,\"rooms\",roomId),(doc)=>{\r\n            console.log(doc.data().messages)\r\n            setContext({roomName:roomName,profile:profile,roomId:roomId,history:doc.data().messages,selected:true})\r\n            return () =>{isMounted=false}\r\n        })\r\n    }, [roomId]);\r\n    \r\n    // click enter to display message\r\n    \r\n    const sendMessage = async (e) =>{\r\n        \r\n        if(roomId!==\"\"){\r\n            var today = new Date();\r\n            var time = today.getHours() + \":\" + today.getMinutes();\r\n            e.preventDefault();\r\n            const docRef = doc(db, \"rooms\", roomId);\r\n            //add a new message to the \"messages\" array field.\r\n            await updateDoc(docRef, {\r\n                messages: arrayUnion({\r\n                user:{\r\n                    id:uId,\r\n                    name:uDisplayName},\r\n                message:input,\r\n                time:time\r\n            }) })\r\n            \r\n        }\r\n        setInput('')\r\n    }\r\n    \r\n    // Using Context api to update the chat title, profile and ****CHAT NEXT****\r\n    return (\r\n        <div className=\"chat\">\r\n            <div className=\"chat__header\">\r\n                <Avatar src={profile} className=\"profile__pic\"/>\r\n                <div className=\"chat__headerInfo\">\r\n                    <h4>{roomName}</h4>\r\n                    <p>{roomId}</p>\r\n                </div>\r\n                <div className=\"chat__headerRight\">\r\n                    <IconButton>\r\n                        <SearchOutlined />\r\n                    </IconButton>\r\n                    <IconButton>\r\n                        <MoreVert />\r\n                    </IconButton>\r\n                </div>\r\n            </div>  \r\n                <div className=\"chat__body\">\r\n                    {history.map(element=><Message key={element.id} time={element.time} message={element.message} user={element.user} currentUser={uId}  />)}  \r\n                     \r\n                </div>\r\n                <div className=\"chat__footer\">\r\n                    <div className='left'>\r\n                        <IconButton><InsertEmoticon/></IconButton>\r\n                        <IconButton><AttachFile/></IconButton>\r\n\r\n                    </div>\r\n                    <form>\r\n                        <input value={input} onChange={(e)=>setInput(e.target.value)}type=\"text\" placeholder=\"Type a message\"></input>\r\n                        <button onClick={sendMessage}type=\"submit\">Send message</button>\r\n                    </form>\r\n                    <div className='right'><Mic/></div>\r\n                    \r\n                </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import React, { useContext } from 'react'\r\nimport Chat from '../Components/Chat'\r\nimport { RoomContext } from '../context/roomContext'\r\nimport '../CSS/Welcome.css'\r\nfunction Welcome(){\r\n    const [context, setContext] = useContext(RoomContext)\r\n    const {selected} = context \r\n    return(selected?\r\n        <Chat />:\r\n        <div className='wc'>\r\n            <div className='wrapper'>\r\n                <div className='pc'>\r\n                    <div className='image'></div>\r\n                </div>\r\n                <div className='tc'>\r\n                    <div className='heading'>\r\n                        <h1>WhatsApp Web</h1>\r\n                        <div><b>NEW</b></div>\r\n                    </div>\r\n                    <div className='text text_top'>\r\n                    Now send and receive messages without keeping your phone online.<br/>\r\n                    Use WhatsApp on up to 4 linked devices and 1 phone at the same time.\r\n                    </div>\r\n                    <div className='text text_bottom'>\r\n                        <div className='logo'></div>Make calls from desktop with WhatsApp for Windows.<a href='https://www.whatsapp.com/download' target=\"_blank\" rel=\"noreferrer\">Get it here</a>\r\n                    </div>\r\n                </div>\r\n               <div className='foot text'><div className='logo'></div>End-to-end encrypted</div>  \r\n            </div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Welcome","import React from \"react\";\r\nimport Sidebar from \"./Sidebar\";\r\nimport \"../CSS/App.css\";\r\nimport RoomProvider from \"../context/roomContext\";\r\nimport Welcome from \"./Welcome\";\r\n\r\n\r\nfunction WhatsApp() {\r\n  return (\r\n    <div className=\"app\">\r\n      <div className=\"bar\"></div>\r\n      <div className=\"app__body\">\r\n         <RoomProvider>\r\n          <Sidebar />\r\n          <Welcome />\r\n        </RoomProvider>\r\n      </div>\r\n    </div>\r\n  ); \r\n}\r\n\r\nexport default WhatsApp;\r\n","import React from \"react\";\r\nimport \"./CSS/App.css\";\r\nimport SignIn from \"./Components/SignIn\"\r\nimport {HashRouter as Router, Routes, Route} from 'react-router-dom'\r\nimport WhatsApp from \"./Components/WhatsApp\";\r\nimport UserProvider from \"./context/userContext\";\r\nfunction App() {\r\n  return (\r\n     <UserProvider>\r\n       <Router>\r\n          <Routes>\r\n            <Route path=\"/\" element={<SignIn/>}/>\r\n            <Route path=\"/app\" element={<WhatsApp/>} />\r\n          </Routes>\r\n      </Router> \r\n    </UserProvider>\r\n  ); \r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './CSS/index.css';\nimport App from './App';\n\nReactDOM.render(\n  <div>\n    <App />\n  </div>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}